

#define R      1 // ??? ?????????
#define RY     2
#define G      3
#define GG     4
#define Y      5
#define SR     6
#define SG     7


char key=0;      // ????????????? ??????? ??????
char state=R;    // ????????????? ???????????? ?????????
char t;          // ???????? ????????
char tr;         // ????? ???????? ???????, ?
char tg;         // ????? ???????? ???????, ?
char T_FLAG = 0; // ?????? ???????? "????? ???????"
int ms = 0;      // ??????? ??????????

void main (void) {

// ?????????????
     init();

     tr=rd_EEPROM(0); if((tr>30)||(tr<5)) tr=5;
     tg=rd_EEPROM(1); if((tg>30)||(tg<5)) tg=5;

     for(t=0;t!=0;t++); // ???? ????????
     t = 10*tr;

// ?????????? ???????????? ????????
        while (1) {
              key=ScanKbd();
              if (key == 1){
                 clear_lcd(); outcw(0x80); outd('D'); //outd('?'); outd('?');
                 //outd('?'); outd('?'); outd('?'); outd('?');
                 //DelayMs(100);
                 //if (T_FLAG) { state=RY;  T_FLAG = 0;  t=20;  YEL=0; }
                 //else if (key == '8') { state=SR;  RED=1; }
              } else{
                clear_lcd(); outcw(0x80); outd('X');
               // state = G;
              }
             // DelayMs(100);            // ???? ?????? ????????
           //   if(t==0) T_FLAG=1; else t--;  // ???????
        }
}

/*

void DelayMs(unsigned int m){  // ???????? ?????? ??????
  unsigned char a; //??????? ?????????????? ?????
  //unsigned int ms; //??????? ??????????
  for(ms=0;ms!=m;ms++) {
    for(a=0;a!=120;a++); // ?????? ???? 1??
    //WMCON.WDTRST=1; // ????? ??????????? ???????
  }
}
*/

