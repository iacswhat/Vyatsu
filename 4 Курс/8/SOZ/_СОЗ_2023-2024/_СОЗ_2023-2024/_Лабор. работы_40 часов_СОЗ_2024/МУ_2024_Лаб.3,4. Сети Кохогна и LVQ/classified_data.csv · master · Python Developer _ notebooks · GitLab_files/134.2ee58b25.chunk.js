(this.webpackJsonp=this.webpackJsonp||[]).push([[134],{O6Bj:function(e,t,o){"use strict";o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return l}));o("86Lb");var i=o("t6Yz"),n=o.n(i);o.d(t,"b",(function(){return n.a}));const r=[],s=n.a.prototype.stopCallback;n.a.prototype.stopCallback=function(e,t,o){for(const i of r){const n=i.call(this,e,t,o);if(void 0!==n)return n}return s.call(this,e,t,o)};const a=function(e){r.unshift(e)},l="mod+c"},Pyc4:function(e,t,o){"use strict";o.r(t);var i=o("FkSe"),n=(o("UezY"),o("z6RN"),o("hG7+"),o("1cpz")),r=o("30su"),s=o("MV2A"),a=o("Bo17"),l=o("fSQg"),d=o("XiQx"),c=o("/lV4"),p=o("3twG"),u=o("ygVz"),k=(o("3UXl"),o("iyoE"),o("WHSv")),h=o.n(k);const f={btnText:Object(c.a)("Create a new fork"),title:Object(c.a)("Fork project?"),message:Object(c.a)("You canâ€™t edit files directly in this project."),existingForksMessage:Object(c.a)("To submit your changes in a merge request, switch to one of these forks or create a new fork."),newForkMessage:Object(c.a)("To submit your changes in a merge request, create a new fork.")};var g={name:"ConfirmForkModal",components:{GlModal:n.a,GlLoadingIcon:i.a,GlLink:s.a},inject:{projectPath:{default:""}},model:{prop:"visible",event:"change"},props:{visible:{type:Boolean,required:!1,default:!1},modalId:{type:String,required:!0},forkPath:{type:String,required:!0}},data:()=>({forks:[]}),apollo:{forks:{query:h.a,variables(){return{projectPath:this.projectPath}},update({project:e}={}){var t;return null==e||null===(t=e.visibleForks)||void 0===t?void 0:t.nodes.map((function(e){return{text:e.fullPath,href:e.webUrl}}))}}},computed:{isLoading(){return this.$apollo.queries.forks.loading},hasWritableForks(){return this.forks.length},btnActions(){return{cancel:{text:Object(c.a)("Cancel")},primary:{text:this.$options.i18n.btnText,attributes:{href:this.forkPath,variant:"confirm"}}}}},i18n:f},b=o("tBpV"),m=Object(b.a)(g,(function(){var e=this,t=e._self._c;return t("gl-modal",{attrs:{visible:e.visible,"modal-id":e.modalId,title:e.$options.i18n.title,"action-primary":e.btnActions.primary,"action-cancel":e.btnActions.cancel},on:{change:function(t){return e.$emit("change",t)}}},[t("p",[e._v(e._s(e.$options.i18n.message))]),e._v(" "),e.isLoading?t("gl-loading-icon"):e.hasWritableForks?[t("p",[e._v(e._s(e.$options.i18n.existingForksMessage))]),e._v(" "),e._l(e.forks,(function(o){return t("div",{key:o.text},[t("gl-link",{attrs:{href:o.href}},[e._v(e._s(o.text))])],1)}))]:t("p",[e._v(e._s(e.$options.i18n.newForkMessage))])],2)}),[],!1,null,null,null).exports,w=o("d08M"),v=o("wQDE");const y={modal:{title:Object(c.a)("Enable Gitpod?"),content:Object(c.g)("Gitpod|To use Gitpod you must first enable the feature in the integrations section of your %{linkStart}user preferences%{linkEnd}."),actionCancelText:Object(c.a)("Cancel"),actionPrimaryText:Object(c.a)("Enable Gitpod")},webIdeText:Object(c.g)("WebIDE|Quickly and easily edit multiple files in your project."),webIdeTooltip:Object(c.g)("WebIDE|Quickly and easily edit multiple files in your project. Press . to open"),toggleText:Object(c.a)("Edit")};var _={name:"CEWebIdeLink",components:{GlModal:n.a,GlSprintf:r.a,GlLink:s.a,GlDisclosureDropdown:a.a,GlDisclosureDropdownGroup:l.a,GlDisclosureDropdownItem:d.b,ConfirmForkModal:m},i18n:y,mixins:[u.b.mixin()],props:{isFork:{type:Boolean,required:!1,default:!1},needsToFork:{type:Boolean,required:!1,default:!1},gitpodEnabled:{type:Boolean,required:!1,default:!1},isBlob:{type:Boolean,required:!1,default:!1},showEditButton:{type:Boolean,required:!1,default:!0},showWebIdeButton:{type:Boolean,required:!1,default:!0},showGitpodButton:{type:Boolean,required:!1,default:!1},showPipelineEditorButton:{type:Boolean,required:!1,default:!1},userPreferencesGitpodPath:{type:String,required:!1,default:""},userProfileEnableGitpodPath:{type:String,required:!1,default:""},editUrl:{type:String,required:!1,default:""},pipelineEditorUrl:{type:String,required:!1,default:""},webIdeUrl:{type:String,required:!1,default:""},webIdeText:{type:String,required:!1,default:""},gitpodUrl:{type:String,required:!1,default:""},gitpodText:{type:String,required:!1,default:""},disableForkModal:{type:Boolean,required:!1,default:!1},forkPath:{type:String,required:!1,default:""},forkModalId:{type:String,required:!1,default:""},webIdePromoPopoverImg:{type:String,required:!1,default:""},cssClasses:{type:String,required:!1,default:"gl-sm-ml-3"}},data:()=>({showEnableGitpodModal:!1,showForkModal:!1}),computed:{actions(){return[this.pipelineEditorAction,this.webIdeAction,this.editAction,this.gitpodAction].filter((function(e){return e}))},hasActions(){return this.actions.length>0},editAction(){var e=this;if(!this.showEditButton)return null;const t=this.needsToFork?{href:"#modal-confirm-fork-edit",handle:function(){e.disableForkModal?e.$emit("edit","simple"):e.showModal("showForkModal")}}:{href:this.editUrl};return{key:"edit",text:Object(c.a)("Edit single file"),secondaryText:Object(c.a)("Edit this file only."),tracking:{action:"click_consolidated_edit",label:"single_file"},...t}},shortcutsDisabled:()=>Object(v.b)(),webIdeActionShortcutKey:()=>Object(w.wb)(w.v)[0],webIdeActionText(){return this.webIdeText?this.webIdeText:this.isBlob?Object(c.a)("Open in Web IDE"):this.isFork?Object(c.a)("Edit fork in Web IDE"):Object(c.a)("Web IDE")},webIdeAction(){var e=this;if(!this.showWebIdeButton)return null;const t=this.needsToFork?{handle:function(){e.disableForkModal?e.$emit("edit","ide"):e.showModal("showForkModal")}}:{handle:function(){Object(p.V)(e.webIdeUrl,!0)}};return{key:"webide",text:this.webIdeActionText,secondaryText:this.$options.i18n.webIdeText,shortcut:this.webIdeActionShortcutKey,tracking:{action:"click_consolidated_edit",label:"web_ide"},...t}},gitpodActionText(){return this.isBlob?Object(c.a)("Open in Gitpod"):this.gitpodText||Object(c.a)("Gitpod")},computedShowGitpodButton(){return this.showGitpodButton&&this.userPreferencesGitpodPath&&this.userProfileEnableGitpodPath},pipelineEditorAction(){if(!this.showPipelineEditorButton)return null;const e=Object(c.a)("Edit, lint, and visualize your pipeline.");return{key:"pipeline_editor",text:Object(c.a)("Edit in pipeline editor"),secondaryText:e,href:this.pipelineEditorUrl,tracking:{action:"click_consolidated_edit",label:"pipeline_editor"}}},gitpodAction(){var e=this;if(!this.computedShowGitpodButton)return null;const t=this.gitpodEnabled?{href:this.gitpodUrl}:{handle:function(){e.showModal("showEnableGitpodModal")}},o=Object(c.a)("Launch a ready-to-code development environment for your project.");return{key:"gitpod",text:this.gitpodActionText,secondaryText:o,tracking:{action:"click_consolidated_edit",label:"gitpod"},...t}},enableGitpodModalProps(){return{"modal-id":"enable-gitpod-modal",size:"sm",title:this.$options.i18n.modal.title,"action-cancel":{text:this.$options.i18n.modal.actionCancelText},"action-primary":{text:this.$options.i18n.modal.actionPrimaryText,attributes:{variant:"confirm",category:"primary",href:this.userProfileEnableGitpodPath,"data-method":"put"}}}},mountForkModal(){const{disableForkModal:e,showWebIdeButton:t,showEditButton:o}=this;return!e&&(t||o)}},methods:{showModal(e){this[e]=!0},executeAction(e){var t;this.track(e.tracking.action,{label:e.tracking.label}),null===(t=e.handle)||void 0===t||t.call(e)}}},j=Object(b.a)(_,(function(){var e=this,t=e._self._c;return t("div",{class:e.cssClasses},[e.hasActions?t("gl-disclosure-dropdown",{attrs:{variant:e.isBlob?"confirm":"default",category:e.isBlob?"primary":"secondary","toggle-text":e.$options.i18n.toggleText,"data-testid":"action-dropdown","fluid-width":"",block:""},on:{shown:function(t){return e.$emit("shown")},hidden:function(t){return e.$emit("hidden")}}},[e._t("before-actions"),e._v(" "),t("gl-disclosure-dropdown-group",{staticClass:"edit-dropdown-group-width"},e._l(e.actions,(function(o){return t("gl-disclosure-dropdown-item",{key:o.key,attrs:{item:o,"data-testid":o.key+"-menu-item"},on:{action:function(t){return e.executeAction(o)}},scopedSlots:e._u([{key:"list-item",fn:function(){return[t("div",{staticClass:"gl-display-flex gl-flex-direction-column"},[t("span",{staticClass:"gl-display-flex gl-justify-content-space-between gl-align-items-center gl-mb-2"},[t("span",{staticClass:"gl-font-weight-bold",attrs:{"data-testid":"action-primary-text"}},[e._v(e._s(o.text))]),e._v(" "),o.shortcut&&!e.shortcutsDisabled?t("kbd",{staticClass:"flat"},[e._v(e._s(o.shortcut))]):e._e()]),e._v(" "),t("span",{staticClass:"gl-font-sm gl-text-secondary",attrs:{"data-testid":"action-secondary-text"}},[e._v("\n              "+e._s(o.secondaryText)+"\n            ")])])]},proxy:!0}],null,!0)})})),1),e._v(" "),e._t("after-actions")],2):e._e(),e._v(" "),e.computedShowGitpodButton&&!e.gitpodEnabled?t("gl-modal",e._b({model:{value:e.showEnableGitpodModal,callback:function(t){e.showEnableGitpodModal=t},expression:"showEnableGitpodModal"}},"gl-modal",e.enableGitpodModalProps,!1),[t("gl-sprintf",{attrs:{message:e.$options.i18n.modal.content},scopedSlots:e._u([{key:"link",fn:function({content:o}){return[t("gl-link",{attrs:{href:e.userPreferencesGitpodPath}},[e._v(e._s(o))])]}}],null,!1,2377202603)})],1):e._e(),e._v(" "),e.mountForkModal?t("confirm-fork-modal",{attrs:{"modal-id":e.forkModalId,"fork-path":e.forkPath},model:{value:e.showForkModal,callback:function(t){e.showForkModal=t},expression:"showForkModal"}}):e._e()],1)}),[],!1,null,null,null).exports,x=o("sHIo"),W=o("dsWN"),S=o("4lAS"),P=o("8Igx"),D=o("qLpH"),E=o("FxFN"),F=o("4wgn"),G=o("Rg8B"),I=o.n(G),O=o("dkxe"),M=o("vP45"),q=o("Fsq/"),A=o("MZIA"),B=o("XRec"),T={components:{GlDisclosureDropdownItem:d.b,WorkspaceStateIndicator:A.a,WorkspaceActions:B.a,TimeAgoTooltip:q.a},mixins:[u.b.mixin()],props:{workspace:{type:Object,required:!0}},computed:{dropdownItem(){return{href:this.workspace.url,text:this.workspace.name}}},methods:{trackOpenWorkspace(){this.track("click_consolidated_edit",{label:"workspace"})}}},C=Object(b.a)(T,(function(){var e=this,t=e._self._c;return t("gl-disclosure-dropdown-item",{staticClass:"gl-my-0",attrs:{item:e.dropdownItem},on:{action:e.trackOpenWorkspace},scopedSlots:e._u([{key:"list-item",fn:function(){return[t("div",{staticClass:"gl-display-flex gl-justify-content-space-between gl-align-items-center"},[t("span",{staticClass:"gl-display-inline-flex gl-flex-direction-column gl-align-items-flex-start"},[t("workspace-state-indicator",{staticClass:"gl-mb-2",attrs:{"workspace-state":e.workspace.actualState}}),e._v(" "),t("span",{staticClass:"gl-pl-1 gl-word-break-word gl-w-90p"},[e._v(e._s(e.workspace.name))]),e._v(" "),t("time-ago-tooltip",{staticClass:"gl-font-sm-600 gl-pl-1 gl-text-secondary gl-mt-2",attrs:{time:e.workspace.createdAt}})],1),e._v(" "),t("workspace-actions",{attrs:{"actual-state":e.workspace.actualState,"desired-state":e.workspace.desiredState,compact:""},on:{click:function(t){return e.$emit("updateWorkspace",{desiredState:t})}}})],1)]},proxy:!0}])})}),[],!1,null,null,null).exports;const $={workspacesGroupLabel:Object(c.g)("Workspaces|Your workspaces"),newWorkspaceButton:Object(c.g)("Workspaces|New workspace"),noWorkspacesMessage:Object(c.g)("Workspaces|A workspace is a virtual sandbox environment for your code in GitLab."),loadingWorkspacesFailedMessage:Object(c.g)("Workspaces|Could not load workspaces"),noWorkspacesSupportMessage:Object(c.a)("To set up this feature, contact your administrator.")},L=Object(D.a)("user/workspace/index.md");var N={components:{GlAlert:W.a,GlButton:S.a,GlDisclosureDropdownGroup:l.a,GlLoadingIcon:i.a,WorkspaceDropdownItem:C,UpdateWorkspaceMutation:M.a},props:{projectId:{type:Number,required:!0},projectFullPath:{type:String,required:!0},newWorkspacePath:{type:String,required:!0},supportsWorkspaces:{type:Boolean,required:!0},borderPosition:{type:String,required:!0}},apollo:{workspaces:{query:I.a,pollInterval:O.j,variables(){return{first:O.h,after:null,before:null,includeActualStates:[O.l.creationRequested,O.l.starting,O.l.running,O.l.stopping,O.l.stopped,O.l.terminating,O.l.failed,O.l.error,O.l.unknown],projectIds:[Object(E.b)(F.v,this.projectId)]}},skip(){return!this.supportsWorkspaces},update(e){var t;return this.loadingWorkspacesFailed=!1,(null===(t=e.currentUser.workspaces)||void 0===t?void 0:t.nodes)||[]},error(e){this.loadingWorkspacesFailed=!0,Object(P.a)(e)}}},data:()=>({workspaces:[],loadingWorkspacesFailed:!1,updateWorkspaceErrorMessage:null}),computed:{hasWorkspaces(){return this.workspaces.length>0},isLoading(){return this.$apollo.queries.workspaces.loading},newWorkspacePathWithProjectId(){return`${this.newWorkspacePath}?project=${encodeURIComponent(this.projectFullPath)}`}},methods:{displayUpdateFailedAlert({error:e}){this.updateWorkspaceErrorMessage=e},hideUpdateFailedAlert(){this.updateWorkspaceErrorMessage=null}},i18n:$,workspacesHelpPath:L},U=Object(b.a)(N,(function(){var e=this,t=e._self._c;return t("update-workspace-mutation",{on:{updateSucceed:e.hideUpdateFailedAlert,updateFailed:e.displayUpdateFailedAlert},scopedSlots:e._u([{key:"default",fn:function({update:o}){return[t("gl-disclosure-dropdown-group",{staticClass:"edit-dropdown-group-width gl-pt-2 gl-pb-4",attrs:{bordered:"","border-position":e.borderPosition,"data-testid":"workspaces-dropdown-group"},scopedSlots:e._u([{key:"group-label",fn:function(){return[t("span",{staticClass:"gl-display-flex gl-font-base gl-line-height-1"},[e._v(e._s(e.$options.i18n.workspacesGroupLabel))])]},proxy:!0}],null,!0)},[e._v(" "),e.isLoading?t("gl-loading-icon"):[e.loadingWorkspacesFailed?t("gl-alert",{attrs:{variant:"danger","show-icon":!1,dismissible:!1}},[e._v("\n          "+e._s(e.$options.i18n.loadingWorkspacesFailedMessage)+"\n        ")]):e.hasWorkspaces?[e.updateWorkspaceErrorMessage?t("gl-alert",{attrs:{"data-testid":"update-workspace-error-alert",variant:"danger","show-icon":!1,dismissible:!1}},[e._v("\n            "+e._s(e.updateWorkspaceErrorMessage)+"\n          ")]):e._e(),e._v(" "),e._l(e.workspaces,(function(e){return t("workspace-dropdown-item",{key:e.id,attrs:{workspace:e},on:{updateWorkspace:function(t){return o(e.id,t)}}})}))]:t("div",{staticClass:"gl-px-4 gl-font-base gl-text-left",attrs:{"data-testid":"no-workspaces-message"}},[t("p",{staticClass:"gl-mb-0 gl-font-sm gl-text-secondary"},[e._v("\n            "+e._s(e.$options.i18n.noWorkspacesMessage)+"\n          ")]),e._v(" "),e.supportsWorkspaces?e._e():t("p",{staticClass:"gl-mb-0 gl-mt-2 gl-font-sm gl-text-secondary"},[e._v("\n            "+e._s(e.$options.i18n.noWorkspacesSupportMessage)+"\n          ")])]),e._v(" "),e.supportsWorkspaces?t("div",{staticClass:"gl-px-4 gl-py-3 gl-display-flex gl-justify-content-start"},[e.supportsWorkspaces?t("gl-button",{attrs:{href:e.newWorkspacePathWithProjectId,"data-testid":"new-workspace-button",block:""}},[e._v(e._s(e.$options.i18n.newWorkspaceButton))]):e._e()],1):e._e()]],2)]}}])})}),[],!1,null,null,null).exports,V=o("JKtV"),R={components:{GlLoadingIcon:i.a,WorkspacesDropdownGroup:U,GetProjectDetailsQuery:V.a,CeWebIdeLink:j},mixins:[Object(x.a)()],inject:{newWorkspacePath:{default:""}},props:{...j.props,projectPath:{type:String,required:!1,default:""},projectId:{type:Number,required:!1,default:0}},data:()=>({isDropdownVisible:!1,projectDetailsLoaded:!1,supportsWorkspaces:!1}),computed:{isWorkspacesDropdownGroupAvailable(){return this.glFeatures.remoteDevelopment},shouldRenderWorkspacesDropdownGroup(){return this.isWorkspacesDropdownGroupAvailable&&this.isDropdownVisible},shouldRenderWorkspacesDropdownGroupBeforeActions(){return this.shouldRenderWorkspacesDropdownGroup&&this.supportsWorkspaces},shouldRenderWorkspacesDropdownGroupAfterActions(){return this.shouldRenderWorkspacesDropdownGroup&&!this.supportsWorkspaces}},methods:{onDropdownShown(){this.isDropdownVisible=!0},onDropdownHidden(){this.isDropdownVisible=!1},onProjectDetailsResult({hasDevFile:e,clusterAgents:t}){this.projectDetailsLoaded=!0,this.supportsWorkspaces=e&&t.length>0},onProjectDetailsError(){this.projectDetailsLoaded=!0}}},z=Object(b.a)(R,(function(){var e=this,t=e._self._c;return t("ce-web-ide-link",e._b({on:{edit:function(t){return e.$emit("edit",t)},shown:e.onDropdownShown,hidden:e.onDropdownHidden},scopedSlots:e._u([e.shouldRenderWorkspacesDropdownGroup?{key:"after-actions",fn:function(){return[t("get-project-details-query",{attrs:{"project-full-path":e.projectPath},on:{result:e.onProjectDetailsResult,error:e.onProjectDetailsError}}),e._v(" "),e.projectDetailsLoaded?t("workspaces-dropdown-group",{attrs:{"new-workspace-path":e.newWorkspacePath,"project-id":e.projectId,"project-full-path":e.projectPath,"supports-workspaces":e.supportsWorkspaces,"border-position":"top"}}):t("div",{staticClass:"gl-my-3"},[t("gl-loading-icon")],1)]},proxy:!0}:null],null,!0)},"ce-web-ide-link",e.$props,!1))}),[],!1,null,null,null);t.default=z.exports},WHSv:function(e,t){var o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getWritableForks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visibleForks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"minimumAccessLevel"},value:{kind:"EnumValue",value:"DEVELOPER"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:214}};o.loc.source={body:"query getWritableForks($projectPath: ID!) {\n  project(fullPath: $projectPath) {\n    id\n    visibleForks(minimumAccessLevel: DEVELOPER) {\n      nodes {\n        id\n        fullPath\n        webUrl\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function n(e,t){for(var o=0;o<e.definitions.length;o++){var i=e.definitions[o];if(i.name&&i.name.value==t)return i}}o.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,o){if("FragmentSpread"===t.kind)o.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&o.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,o)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,o)})),t.definitions&&t.definitions.forEach((function(t){e(t,o)}))}(e,t),i[e.name.value]=t}})),e.exports=o,e.exports.getWritableForks=function(e,t){var o={kind:e.kind,definitions:[n(e,t)]};e.hasOwnProperty("loc")&&(o.loc=e.loc);var r=i[t]||new Set,s=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var l=a;a=new Set,l.forEach((function(e){s.has(e)||(s.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return s.forEach((function(t){var i=n(e,t);i&&o.definitions.push(i)})),o}(o,"getWritableForks")},wQDE:function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"a",(function(){return r}));var i=o("O6Bj");o("U6io");const n=function(){return!window.gon.keyboard_shortcuts_enabled};function r(){localStorage.setItem("shortcutsDisabled",!0),i.b.pause()}}}]);
//# sourceMappingURL=134.2ee58b25.chunk.js.map